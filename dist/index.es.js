import n,{useRef as e,useEffect as t,useState as r,useCallback as o}from"react";import i from"styled-components";function l(){return l=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},l.apply(this,arguments)}function a(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}function u(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function c(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null==t)return;var r,o,i=[],l=!0,a=!1;try{for(t=t.call(n);!(l=(r=t.next()).done)&&(i.push(r.value),!e||i.length!==e);l=!0);}catch(n){a=!0,o=n}finally{try{l||null==t.return||t.return()}finally{if(a)throw o}}return i}(n,e)||s(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(n){return function(n){if(Array.isArray(n))return p(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||s(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(n,e){if(n){if("string"==typeof n)return p(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(n,e):void 0}}function p(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var f,g,h,m,v,b,x,y,w,O,E,S,k,C,P=function(n){var i,l,a,u=c(r(),2),d=u[0],s=u[1],p=o((function(){n&&n.current&&s(n.current.getBoundingClientRect())}),[n]);return i=p,l=n,a=e(null),t((function(){var n=l&&l.current;return a&&a.current&&n&&a.current.unobserve(n),a.current=new ResizeObserver(i),n&&a.current.observe(n),function(){a&&a.current&&n&&a.current.unobserve(n)}}),[i,l]),t((function(){return p(),window.addEventListener("resize",p),window.addEventListener("scroll",p),function(){window.removeEventListener("resize",p),window.removeEventListener("scroll",p)}}),[p]),d},T=function(n){var r=e(),o=e();return t((function(){r.current=n})),t((function(){return document.addEventListener("click",n),function(){return document.removeEventListener("click",n)};function n(n){o.current&&r.current&&!o.current.contains(n.target)&&r.current(n)}}),[]),o},I=function(n,e){var o=c(r(),2),i=o[0],l=o[1];return t((function(){n&&l(function(n,e){var t=n.bottom+e;return window.innerHeight>t?"bottom":"top"}(n,e))}),[n,e]),i},K=function(){var n=e(null),t=o((function(){n&&n.current&&n.current.focus()}),[]),r=o((function(){n&&n.current&&n.current.blur()}),[]);return{inputRef:n,focus:t,blur:r}},j=function(n){var e=n.options,i=n.value,l=n.onOptionSelect,a=n.onEscape,u=n.search,d=c(r(!1),2),s=d[0],p=d[1],f=c(r(null),2),g=f[0],h=f[1],m=o((function(){null===g&&e.length&&h(0),p(!0)}),[g,e]),v=o((function(){p(!1),h(null)}),[]),b=o((function(){v(),a()}),[v,a]),x=o((function(n){switch(n.key){case"ArrowUp":if(s){if(!e.length)return;h(g-1<0?e.length-1:g-1)}else h(e.length-1),m();break;case"ArrowDown":if(s){if(!e.length)return;g+1>=e.length?h(0):h(g+1)}else h(0),m();break;case"Enter":if(null===g)return;var t=e[g];l(t);break;case"Escape":case"Tab":b();break;default:s||m()}}),[s,m,b,l,g,e]),y=o((function(){s&&u.length||(s?v():m())}),[v,s,m,u]);return t((function(){h(e.length?0:null)}),[e]),t((function(){v()}),[i,v]),{dropdown:{isOpen:s,open:m,close:v,toggle:y,escape:b},pointer:{position:g,setPosition:h},handleKeyDown:x}},R=i.div(f||(f=u(["\nposition: relative;\nmin-height: calc(1.5em + .75rem + 2px) !important;\nwidth: 100%;\nmargin: 0;\npadding-left: .375rem;\npadding-right: .375rem;\npadding-bottom: .375rem;\nbox-sizing: border-box;\ndisplay: flex;\nbackground-color: #fff;\nborder: 1px solid #ced4da;\nborder-radius: .25rem;\ncursor: pointer;\n","\n","\n\n&:focus-within {\n    box-shadow: 0 0 0 0.2rem rgb(38 143 255 / 50%);\n}\n"])),(function(n){var e=n.dropdownPosition;return n.isDropdownOpen&&"border-".concat(e,"-right-radius: 0;\n         border-").concat(e,"-left-radius: 0;\n         border-").concat(e,"-color: #fff;")}),(function(n){return n.disabled?"pointer-events: none;\n           background-color: #e9ecef;":""})),z=["isPointerOver","isSelected","children"],A=i.span(g||(g=u(["\npadding: .375rem .75rem;\ndisplay: block;\nwhite-space: nowrap;\ncursor: pointer;\n\n","\n"])),(function(n){var e=n.isPointerOver,t=n.isSelected;return e?"\n            color: #fff;\n            background-color: #007bff;":t?"\n            color: #212529;\n            background-color: #f2f2f2;":void 0})),V=function(r){var o=r.isPointerOver,i=r.isSelected,u=r.children,c=a(r,z),d=e();return t((function(){o&&d.current&&d.current.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}),[o]),n.createElement(A,l({ref:d,role:"option","aria-selected":i,title:"string"==typeof u?u:null,isPointerOver:o,isSelected:i},c),u)},H=i(A)(h||(h=u(["\ncursor: default;\n"]))),D=function(){return n.createElement(H,null,"Совпадений не найдено")},L=i.div(m||(m=u(["\nposition: absolute;\nleft: -1px;\npadding: 0px;\nmax-height: ","px;\nwidth: ","px;\ndisplay: flex;\nflex-direction: column;\noverflow-x: hidden;\nborder-radius: 0;\nbackground-color: white;\nborder: 1px solid #ced4da;\nbox-sizing: border-box;\nz-index: 19;\n","\n"])),(function(n){return n.maxHeight}),(function(n){return n.parentBounds.width}),(function(n){var e=n.parentBounds;return"top"===n.dropdownPosition?"bottom: ".concat(e.height,"px;\n               border-bottom: none;\n               border-top-right-radius: .25rem;\n               border-top-left-radius: .25rem;"):"top: ".concat(e.height-1,"px;\n               border-top: none;\n               border-bottom-right-radius: .25rem;\n               border-bottom-left-radius: .25rem;")})),B=function(e){var t=e.options,r=void 0===t?[]:t,o=e.content,i=e.getOptionKey,l=void 0===i?function(n){return n}:i,a=e.renderOptionText,u=void 0===a?function(n){return n}:a,c=e.onSelectOption,d=e.selectedItems,s=e.pointer,p=e.onUpdatePointer,f=e.parentBounds,g=e.maxHeight,h=void 0===g?350:g,m=e.position;return n.createElement(L,{dropdownPosition:m,maxHeight:h,parentBounds:f},o||(r.length?r.map((function(e,t){var r=l(e),o=t===s,i=!(!d||!d.find((function(n){return l(n)===r})));return n.createElement(V,{key:r,isPointerOver:o,isSelected:i,onMouseEnter:function(){return p(t)},onClick:function(n){n.stopPropagation(),c(e)}},u(e))})):n.createElement(D,null)))},U=i.input(v||(v=u(["\nflex-grow: 1;\nmargin-top: calc(.375rem - 2px);\npadding: 0;\nbox-sizing: border-box;\nborder: none;\nfont-family: inherit;\nfont-size: inherit;\nbackground-color: inherit;\nline-height: inherit;\ncolor: #495057;\n\n&:focus {\n    outline: 0;\n}\n"]))),$=function(e){var t=e.inputRef,r=e.placeholder,o=e.value,i=e.onSearchChange,l=e.disabled;return n.createElement(U,{ref:t,placeholder:r,value:o,onChange:function(n){return i(n.target.value)},disabled:l})},M=i.span(b||(b=u(["\npadding-right: 3px;\npadding-left: 3px;\nfont-weight: 700;\nfont-size: 1.25rem;\ncolor: #bdc6d0;\nalign-self: center;\n\n&:hover {\n    color: #343a40;\n}\n"]))),F=function(e){var t=e.onClick;return n.createElement(M,{onClick:t,title:"Очистить"},"×")},W=i.div(x||(x=u(["\ndisplay: flex;\nflex: 1;\nalign-items: flex-end;\n"]))),q=i.span(y||(y=u(["\nflex: 1;\ncolor: #495057;\n"]))),G=function(e){var t=e.value,r=e.renderValueText,o=e.input,i=e.onClear;return n.createElement(W,null,t?n.createElement(n.Fragment,null,n.createElement(q,null,r(t)),n.createElement(F,{onClick:i})):o)},J=i(A)(w||(w=u(["\ncursor: default;\n"]))),N=function(){return n.createElement(J,null,"Продолжайте ввод, чтобы начался поиск")},Q=i(A)(O||(O=u(["\ncursor: default;\ntext-align: center;\n"]))),X=i.span(E||(E=u(["\n@keyframes spinner-border {\n  to { transform: rotate(360deg); }\n}\ndisplay: inline-block;\nwidth: 1rem;\nheight: 1rem;\nvertical-align: text-bottom;\nborder: .25em solid currentColor;\nborder-right-color: transparent;\nborder-radius: 50%;\nborder-width: .2em;\nanimation: spinner-border .75s linear infinite;\ncolor: #6c757d!important;\n"]))),Y=function(){return n.createElement(Q,null,n.createElement(X,null))},Z=["options","value","onChange","onSearchChange","threshold","isLoading","getOptionKey","renderOptionText","renderValueText","dropdownHeight","placeholder","disabled"],_=function(e){var t=e.options,i=void 0===t?[]:t,u=e.value,d=void 0===u?null:u,s=e.onChange,p=void 0===s?function(){}:s,f=e.onSearchChange,g=void 0===f?function(){}:f,h=e.threshold,m=void 0===h?3:h,v=e.isLoading,b=void 0!==v&&v,x=e.getOptionKey,y=void 0===x?function(n){var e;return null!==(e=n.id)&&void 0!==e?e:n}:x,w=e.renderOptionText,O=void 0===w?function(n){return n}:w,E=e.renderValueText,S=void 0===E?function(n){return O(n)}:E,k=e.dropdownHeight,C=void 0===k?300:k,z=e.placeholder,A=void 0===z?"Начните ввод для поиска":z,V=e.disabled,H=void 0!==V&&V,D=a(e,Z),L=c(r(""),2),U=L[0],M=L[1],F=K(),W=F.inputRef,q=F.focus,J=F.blur,Q=U.length<=m?n.createElement(N,null):null,X=b?n.createElement(Y,null):null,_=o((function(n){var e=n.length<=m||n.length>m+1&&!b&&0===i.length&&n.startsWith(U);M(n),e||g(n)}),[g,b,i,m,U]),nn=o((function(n){p(n),_("")}),[p,_]),en=j({onEscape:function(){J(),_("")},onOptionSelect:nn,options:i,search:U,value:d}),tn=en.dropdown,rn=en.pointer,on=en.handleKeyDown,ln=o((function(){tn.escape()}),[tn]),an=o((function(){i.length&&U.length>m&&tn.toggle(),q()}),[q,tn,i,U,m]),un=o((function(){nn(null)}),[nn]),cn=T(ln),dn=P(cn),sn=I(dn,C),pn=n.createElement($,{inputRef:W,placeholder:d?null:A,value:U,onSearchChange:_,disabled:H});return n.createElement(R,l({ref:cn,dropdownPosition:sn,isDropdownOpen:tn.isOpen,onKeyDown:on,onClick:an,disabled:H},D),n.createElement(G,{value:d,renderValueText:S,input:pn,onClear:un}),tn.isOpen&&!H?n.createElement(B,{content:Q||X||null,options:i,getOptionKey:y,renderOptionText:O,onSelectOption:nn,pointer:rn.position,onUpdatePointer:rn.setPosition,parentBounds:dn,maxHeight:300,position:sn}):null)},nn=i.div(S||(S=u(["\ndisplay: flex;\nalign-items: center;\npadding: 0;\npadding-right: .75rem;\nmargin-top: calc(.375rem - 2px);\nmargin-right: .375rem;\ncolor: #495057;\nfont-size: 1rem;\ncursor: pointer;\nborder: 1px solid #bdc6d0;\nborder-radius: .2rem;\n"]))),en=i.span(k||(k=u(["\npadding-right: 3px;\npadding-left: 3px;\nmargin-right: 1px;\nmargin-left: 3px;\nfont-weight: 700;\ncolor: #bdc6d0;\n\n&:hover {\n    color: #343a40;\n}\n"]))),tn=function(e){var t=e.onItemRemove,r=e.children;return n.createElement(nn,null,n.createElement(en,{onClick:function(n){n.stopPropagation(),t()}},"×"),r)},rn=i.div(C||(C=u(["\ndisplay: flex;\nflex-wrap: wrap;\nflex: 1;\n"]))),on=function(e){var t=e.selected,r=e.getOptionKey,o=e.renderValueText,i=e.onItemRemove,l=e.input;return n.createElement(rn,null,t.map((function(e){return n.createElement(tn,{key:r(e),onItemRemove:function(){return i(e)}},o(e))})),l)},ln=["options","value","onChange","getOptionKey","renderOptionText","renderValueText","dropdownHeight","placeholder","disabled","getSearchValue"],an=function(e){var t=e.options,i=void 0===t?[]:t,u=e.value,s=void 0===u?[]:u,p=e.onChange,f=void 0===p?function(){}:p,g=e.getOptionKey,h=void 0===g?function(n){var e;return null!==(e=n.id)&&void 0!==e?e:n}:g,m=e.renderOptionText,v=void 0===m?function(n){return n}:m,b=e.renderValueText,x=void 0===b?function(n){return v(n)}:b,y=e.dropdownHeight,w=void 0===y?300:y,O=e.placeholder,E=void 0===O?"Начните ввод для поиска":O,S=e.disabled,k=void 0!==S&&S,C=e.getSearchValue,z=void 0===C?function(n){return v(n)}:C,A=a(e,ln),V=c(r(""),2),H=V[0],D=V[1],L=c(r(i),2),U=L[0],M=L[1],F=K(),W=F.inputRef,q=F.focus,G=F.blur,J=o((function(n){D(n);var e=""===n?i:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(n){return n},r=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=new RegExp(r,"i");return n.filter((function(n){return o.test(t(n))}))}(i,n,z);M(e)}),[i,z]),N=o((function(n){f(n),J(""),q()}),[q,f,J]),Q=o((function(n){var e,t=s.findIndex((function(e){return h(e)===h(n)}));e=-1!==t?[].concat(d(s.slice(0,t)),d(s.slice(t+1))):[].concat(d(s),[n]),N(e)}),[s,h,N]),X=o((function(n){var e=s.filter((function(e){return h(e)!==h(n)}));N(e)}),[s,h,N]),Y=j({onEscape:function(){G(),J("")},onOptionSelect:Q,options:U,search:H,value:s}),Z=Y.dropdown,_=Y.pointer,nn=Y.handleKeyDown,en=o((function(){Z.escape()}),[Z]),tn=o((function(){Z.toggle(),q()}),[Z,q]),rn=T(en),an=P(rn),un=I(an,w),cn=n.createElement($,{inputRef:W,placeholder:s.length?null:E,value:H,onSearchChange:J,disabled:k});return n.createElement(R,l({ref:rn,dropdownPosition:un,isDropdownOpen:Z.isOpen,onKeyDown:nn,onClick:tn,disabled:k},A),n.createElement(on,{selected:s,getOptionKey:h,renderValueText:x,onItemRemove:X,input:cn}),Z.isOpen&&!k?n.createElement(B,{options:U,getOptionKey:h,renderOptionText:v,onSelectOption:Q,pointer:_.position,onUpdatePointer:_.setPosition,selectedItems:s,parentBounds:an,maxHeight:300,position:un}):null)};export{_ as Autocomplete,an as Multiselect};
//# sourceMappingURL=index.es.js.map
